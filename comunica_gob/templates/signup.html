{% extends 'base.html' %}

{% block content %}
<div class="container">
  <h1>{{ title }}</h1>
  {% if messages %}
  <div id="messages" style="display: none;">
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }}">
      {{ message }}
    </div>
    {% endfor %}
  </div>
  {% endif %}
  <form action="/signup/" method="POST">
    {{ form.as_p }}
    {% csrf_token %}
    <button class="btn btn-primary">Registrarse</button>
  </form>
</div>

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.min.js"></script>
<script>
  {% if messages %}
  document.addEventListener('DOMContentLoaded', function () {
    var messageElements = document.querySelectorAll('#messages .alert');
    messageElements.forEach(function (element) {
      var message = element.textContent.trim();
      var messageType = element.classList.contains('alert-success') ? 'success' : 'error';

      Swal.fire({
        title: messageType,
        text: message,
        icon: messageType,
        confirmButtonColor: '#3085d6',
        confirmButtonText: 'Aceptar'
      });
    });
  });
  {% endif %}
</script>
{% endblock %}

{% endblock %}